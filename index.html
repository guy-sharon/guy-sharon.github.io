<!DOCTYPE html>
<html>
<head>
  <title>מדריך טיולים</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Verdana, Geneva, Tahoma, sans-serif; text-align: center; 
        background: #f0f4f8; }
    button { 
      background: #0b72b9; color:  rgb(255, 255, 255); font-size: 3em; 
      padding: 10px 20px; margin: 10px 23px; border: none; border-radius: 15px;
      font-family: Verdana, Geneva, Tahoma, sans-serif;
    }
    h1 { color: #2a2344; font-size : 2.5em; margin-top: 30px; }
  </style>
  <script>
        // Function to check user's location
        function checkLocation(destLat, destLng, placeName) {
            if (!navigator.geolocation) {
                alert('Geolocation is not supported by your browser.');
                return;
            }
            navigator.geolocation.getCurrentPosition((position) => {
                const userLat = position.coords.latitude;
                const userLng = position.coords.longitude;

                // Calculate distance in km using Haversine formula
                const R = 6371; // Earth radius in km
                const dLat = (destLat - userLat) * Math.PI / 180;
                const dLng = (destLng - userLng) * Math.PI / 180;
                const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                          Math.cos(userLat * Math.PI / 180) * Math.cos(destLat * Math.PI / 180) *
                          Math.sin(dLng/2) * Math.sin(dLng/2);
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                const distance = R * c;

                if (distance > 1) { // if more than 1 km away
                    var msg = "האם אתם בטוחים שברצונכם להגיע ל"
                    msg += `${placeName}`
                    msg += "?"
                    const proceed = confirm(msg);
                    if (proceed) {
                        window.location.href = `https://waze.com/ul?ll=${destLat},${destLng}&navigate=yes`;
                    }
                } else {
                    window.location.href = `https://waze.com/ul?ll=${destLat},${destLng}&navigate=yes`;
                }
            }, () => {
                alert('Unable to retrieve your location.');
            },
            {
                maximumAge: 60000,  // use cached location up to 60s
            });
        }
    </script>
</head>
<body>
  <h1>מדריך טיולים</h1>
    <h2>פרק א</h2>
      <button onclick="checkLocation(59.579631217030496, 9.173712088688937, 'כנסיית העץ העתיקה')">1</button>
      <button onclick="checkLocation(59.76946921278479, 7.389044921790655, 'מלון ווגסלידטון')">2</button>
    <h2>פרק ב</h2>
      <button onclick="checkLocation(60.46673360531188, 7.068500369061384, 'איידפיורד')">3</button>
      <button onclick="checkLocation(60.37024545975006, 6.108024022985264, 'מפלי שטיינסדלספוסן')">4</button>
      <button onclick="checkLocation(60.39118163725193, 5.3216444182500835, 'ברגן')">5</button>

  <script>
    function openLink(url) { window.location.href = url; }
  </script>
</body>
</html>
